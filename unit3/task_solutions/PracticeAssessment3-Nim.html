<!DOCTYPE html>
<html>
<head>
	<title>Practice Assessment Unit 3 - Nim</title>
</head>
<body>
	<script>
	/* 
	 * This is a simulation of the game of nim. It is played between
	 * the user and the computer.
	 *
	 */

	// Welcome the user
	alert("Welcome to my game of Nim.");

	// Keep track of whose turn it is. 0 for player, 1 for computer
	var PLAYER = 0;
	var COMPUTER = 1;
	var turn;

	// Number of toothpicks
	var toothpicks;

	// Determine who goes first.
	var randomFirst = Math.random();
	if(randomFirst < 0.5) {
		alert("This time you are going to go first.");
		turn = PLAYER;
		// calculate the number of toothpicks
		var MAX = 30;
		var MIN = 20;
		toothpicks = Math.floor((MAX-MIN+1)*Math.random())+MIN;
		alert("I choose the total number of toothpicks to be " + toothpicks + "." );
	} else {
		alert("This time I'll go first.");
		turn = COMPUTER;
		// ask for the number of toothpicks
		toothpicks = parseInt(prompt("How many toothpicks should we start with (20-30)?"));
	}


	// The main game loop
	while(toothpicks>0) {
		if(turn == PLAYER) {
			var choice = parseInt(prompt("Your turn. There are " + toothpicks + " toothpicks left. How many toothpicks do you want to remove (1-3)?"));
			toothpicks = toothpicks - choice;
		} else {
			var choice;
			var message;
			if(toothpicks > 3) {
				choice = 3; // always take the max number if there are a lot left
				message = "My turn. There are "+ toothpicks +" toothpicks left. I, the Computer, will remove "+ choice +" of the them."
			}
			else if (toothpicks > 1) {
				choice = toothpicks - 1; // if there are 2 or 3 left, take 1 or 2 so that only 1 remains.
				message = "My turn. There are "+ toothpicks +" toothpicks left. I, the Computer, will remove "+ choice +" of the them."
			}
			else {
				choice = 1; // if there is only 1 left, take 1.
				message = "My turn. There is 1 toothpick left. I, the Computer, will remove it."
			}
			alert(message);
			toothpicks = toothpicks - choice; 
		}
		// Switch to the other player
		turn = 1 - turn;
	}

	// Determine who wins and the right message
	var finalMessage;

	if(turn == PLAYER) {
		finalMessage = "YOU WIN!";
	} else {
		finalMessage = "YOU LOSE!";
	}

	// display final message on webpage
	var p = document.createElement("p");
	p.appendChild(document.createTextNode(finalMessage));
	document.body.appendChild(p);

	</script>
</body>
</html>
